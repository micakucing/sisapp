(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[904],{13896:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>c});var l=s(37876),n=s(14232),t=s(20485),i=s(98467),r=s(22013);function c(){let[e,a]=(0,n.useState)([]),[s,c]=(0,n.useState)(""),[d,u]=(0,n.useState)(""),[o,m]=(0,n.useState)(60),[h,x]=(0,n.useState)(""),[j,p]=(0,n.useState)(!0),b=async()=>{a((await (0,t.GG)((0,t.rJ)(i.db,"exams"))).docs.map(e=>({id:e.id,...e.data()}))),p(!1)};(0,n.useEffect)(()=>{b()},[]);let N=async()=>{if(!s||!d)return alert("Isi semua field");await (0,t.gS)((0,t.rJ)(i.db,"exams"),{title:s,description:d,duration:Number(o),kelasId:h}),c(""),u(""),m(60),x(""),b()},f=async e=>{confirm("Hapus ujian ini?")&&(await (0,t.kd)((0,t.H9)(i.db,"exams",e)),b())};return j?(0,l.jsx)("p",{children:"Loading..."}):(0,l.jsx)(r.A,{allowedRoles:["admin","guru"],children:(0,l.jsxs)("div",{className:"container py-5",children:[(0,l.jsx)("h2",{className:"mb-4",children:"Dashboard Ujian - Admin/Guru"}),(0,l.jsxs)("div",{className:"card p-3 mb-4",children:[(0,l.jsx)("h5",{children:"Tambah Ujian Baru"}),(0,l.jsxs)("div",{className:"mb-2",children:[(0,l.jsx)("input",{className:"form-control mb-2",placeholder:"Judul Ujian",value:s,onChange:e=>c(e.target.value)}),(0,l.jsx)("textarea",{className:"form-control mb-2",placeholder:"Deskripsi Ujian",value:d,onChange:e=>u(e.target.value)}),(0,l.jsx)("input",{className:"form-control mb-2",type:"number",placeholder:"Durasi (menit)",value:o,onChange:e=>m(e.target.value)}),(0,l.jsx)("input",{className:"form-control mb-2",placeholder:"Kelas ID (opsional)",value:h,onChange:e=>x(e.target.value)})]}),(0,l.jsx)("button",{className:"btn btn-success",onClick:N,children:"Tambah Ujian"})]}),(0,l.jsx)("div",{className:"row g-3",children:e.map(e=>(0,l.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,l.jsx)("div",{className:"card shadow-sm h-100",children:(0,l.jsxs)("div",{className:"card-body d-flex flex-column",children:[(0,l.jsx)("h5",{className:"card-title",children:e.title}),(0,l.jsx)("p",{className:"card-text",children:e.description}),(0,l.jsxs)("p",{className:"card-text",children:["Durasi: ",e.duration," menit"]}),(0,l.jsxs)("p",{className:"card-text",children:["Kelas ID: ",e.kelasId||"-"]}),(0,l.jsxs)("div",{className:"mt-auto d-flex gap-2",children:[(0,l.jsx)("button",{className:"btn btn-primary",onClick:()=>window.location.href="/admin/exam/".concat(e.id),children:"Kelola Soal"}),(0,l.jsx)("button",{className:"btn btn-danger",onClick:()=>f(e.id),children:"Hapus"})]})]})})},e.id))})]})})}},22013:(e,a,s)=>{"use strict";s.d(a,{A:()=>c});var l=s(37876),n=s(14232),t=s(14e3),i=s(98467),r=s(20485);function c(e){let{allowedRoles:a,children:s}=e,c=(0,t.useRouter)(),[d,u]=(0,n.useState)(!0),[o,m]=(0,n.useState)(!1);return((0,n.useEffect)(()=>{(async()=>{let e=i.j.currentUser;if(!e)return c.push("/");let s=(0,r.H9)(i.db,"users",e.uid),l=(await (0,r.x7)(s)).data();if(!(null==l?void 0:l.role)){alert("Role belum ditentukan. Hubungi admin!"),c.push("/");return}a.includes(l.role)?m(!0):"siswa"===l.role?c.push("/student/dashboard"):c.push("/"),u(!1)})()},[c,a]),d)?(0,l.jsx)("p",{children:"Loading..."}):o?(0,l.jsx)(l.Fragment,{children:s}):null}},25448:(e,a,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/exams",function(){return s(13896)}])}},e=>{e.O(0,[0,636,593,792],()=>e(e.s=25448)),_N_E=e.O()}]);