(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[530],{30364:(e,s,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/results",function(){return t(71726)}])},32383:()=>{},71726:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>p});var a=t(37876),l=t(14232),i=t(20485),d=t(98467),n=t(34007),r=t(46465),c=t(4069),o=t(40570),h=t(25493),x=t(83862),m=t(39697),u=t(12770),j=t(49473);function p(){let[e,s]=(0,l.useState)([]),[t,p]=(0,l.useState)([]),[b,v]=(0,l.useState)([]),[f,_]=(0,l.useState)(""),[k,N]=(0,l.useState)(""),[w,S]=(0,l.useState)(!0);(0,l.useEffect)(()=>{(async()=>{let e=(await (0,i.GG)((0,i.rJ)(d.db,"exams"))).docs.map(e=>({id:e.id,...e.data()}));p(e),v(Array.from(new Set(e.map(e=>e.kelasId).filter(Boolean))))})()},[]),(0,l.useEffect)(()=>{(async()=>{S(!0);let e=(0,i.rJ)(d.db,"examResults");f&&(e=(0,i.P)(e,(0,i._M)("examId","==",f)));let a=(await (0,i.GG)(e)).docs.map(e=>({id:e.id,...e.data()}));k&&(a=a.filter(e=>{let s=t.find(s=>s.id===e.examId);return(null==s?void 0:s.kelasId)===k})),s(a),S(!1)})()},[f,k,t]);let y=[];return(e.forEach(e=>{y.push({name:e.studentId,score:e.score})}),w)?(0,a.jsx)("p",{children:"Loading..."}):(0,a.jsxs)("div",{className:"container py-5",children:[(0,a.jsx)("h2",{className:"mb-4",children:"Dashboard Hasil Ujian"}),(0,a.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[(0,a.jsx)("h5",{className:"mb-0",children:"Tabel Hasil"}),(0,a.jsx)("button",{className:"btn btn-success",onClick:()=>{if(!e.length)return alert("Tidak ada data untuk diexport");let s=e.map(e=>{var s;let a=t.find(s=>s.id===e.examId);return{"Siswa ID":e.studentId,Ujian:(null==a?void 0:a.title)||"-",Score:e.score,Status:e.status,Waktu:(null==(s=e.timestamp)?void 0:s.toDate)?e.timestamp.toDate().toLocaleString():"-"}}),a=u.Wp.json_to_sheet(s),l=u.Wp.book_new();u.Wp.book_append_sheet(l,a,"Hasil Ujian");let i=new Blob([u.M9(l,{bookType:"xlsx",type:"array"})],{type:"application/octet-stream"});(0,j.saveAs)(i,"Hasil_Ujian.xlsx")},children:"Export ke Excel"})]}),(0,a.jsxs)("div",{className:"row mb-4",children:[(0,a.jsx)("div",{className:"col-md-6 mb-2",children:(0,a.jsxs)("select",{className:"form-select",value:f,onChange:e=>_(e.target.value),children:[(0,a.jsx)("option",{value:"",children:"-- Pilih Ujian --"}),t.map(e=>(0,a.jsx)("option",{value:e.id,children:e.title},e.id))]})}),(0,a.jsx)("div",{className:"col-md-6 mb-2",children:(0,a.jsxs)("select",{className:"form-select",value:k,onChange:e=>N(e.target.value),children:[(0,a.jsx)("option",{value:"",children:"-- Pilih Kelas --"}),b.map(e=>(0,a.jsx)("option",{value:e,children:e},e))]})})]}),(0,a.jsx)("div",{className:"table-responsive mb-5",children:(0,a.jsxs)("table",{className:"table table-bordered",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"Siswa ID"}),(0,a.jsx)("th",{children:"Ujian"}),(0,a.jsx)("th",{children:"Score"}),(0,a.jsx)("th",{children:"Status"}),(0,a.jsx)("th",{children:"Waktu"})]})}),(0,a.jsx)("tbody",{children:e.map(e=>{var s;let l=t.find(s=>s.id===e.examId);return(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:e.studentId}),(0,a.jsx)("td",{children:(null==l?void 0:l.title)||"-"}),(0,a.jsx)("td",{children:e.score}),(0,a.jsx)("td",{children:e.status}),(0,a.jsx)("td",{children:(null==(s=e.timestamp)?void 0:s.toDate)?e.timestamp.toDate().toLocaleString():"-"})]},e.id)})})]})}),(0,a.jsx)("h5",{className:"mb-3",children:"Grafik Skor Siswa"}),(0,a.jsx)("div",{style:{width:"100%",height:300},children:(0,a.jsx)(n.u,{children:(0,a.jsxs)(r.E,{data:y,children:[(0,a.jsx)(c.d,{strokeDasharray:"3 3"}),(0,a.jsx)(o.W,{dataKey:"name"}),(0,a.jsx)(h.h,{}),(0,a.jsx)(x.m,{}),(0,a.jsx)(m.y,{dataKey:"score",fill:"#6498FE"})]})})})]})}},83686:()=>{}},e=>{e.O(0,[509,690,636,593,792],()=>e(e.s=30364)),_N_E=e.O()}]);