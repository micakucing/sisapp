(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[719],{25705:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>c});var i=s(37876),n=s(14232),l=s(89099),t=s(20485),d=s(98467),r=s(40482);function c(){let e=(0,l.useRouter)(),[a,s]=(0,n.useState)({name:"",nis:"",kelasId:"",photo:""}),[c,m]=(0,n.useState)([]),[o,h]=(0,n.useState)({});(0,n.useEffect)(()=>{!async function(){m((await (0,t.GG)((0,t.rJ)(d.db,"classes"))).docs.map(e=>({id:e.id,...e.data()})))}()},[]);let u=async()=>{let e={};return a.name||(e.name="Nama wajib diisi"),a.nis||(e.nis="NIS wajib diisi"),a.nis&&(await (0,t.GG)((0,t.rJ)(d.db,"students"))).docs.some(e=>e.data().nis===a.nis)&&(e.nis="NIS sudah digunakan"),a.rfid&&(await (0,t.GG)((0,t.rJ)(d.db,"students"))).docs.some(e=>e.data().rfid===a.rfid)&&(e.rfid="RFID sudah digunakan"),a.kelasId||(e.kelasId="Kelas wajib dipilih"),h(e),0===Object.keys(e).length},f=async s=>{s.preventDefault(),await u()&&(await (0,t.gS)((0,t.rJ)(d.db,"students"),a),alert("Siswa berhasil ditambahkan"),e.push("/students"))},x=e=>{s({...a,[e.target.name]:e.target.value})};return(0,i.jsxs)("div",{className:"d-flex flex-column flex-lg-row",children:[(0,i.jsx)("div",{className:"col-lg-2 p-0",children:(0,i.jsx)(r.A,{})}),(0,i.jsxs)("div",{className:"flex-grow-1 p-3",children:[(0,i.jsx)("h2",{className:"mb-4",children:"Tambah Siswa"}),(0,i.jsxs)("form",{onSubmit:f,className:"col-12 col-md-6",children:[(0,i.jsxs)("div",{className:"mb-3",children:[(0,i.jsx)("label",{className:"form-label",children:"Nama"}),(0,i.jsx)("input",{type:"text",name:"name",className:"form-control ".concat(o.name?"is-invalid":""),value:a.name,onChange:x}),o.name&&(0,i.jsx)("div",{className:"invalid-feedback",children:o.name})]}),(0,i.jsxs)("div",{className:"mb-3",children:[(0,i.jsx)("label",{className:"form-label",children:"NIS"}),(0,i.jsx)("input",{type:"text",name:"nis",className:"form-control ".concat(o.nis?"is-invalid":""),value:a.nis,onChange:x}),o.nis&&(0,i.jsx)("div",{className:"invalid-feedback",children:o.nis})]}),(0,i.jsxs)("div",{className:"mb-3",children:[(0,i.jsx)("label",{className:"form-label",children:"RFID"}),(0,i.jsx)("input",{type:"text",name:"rfid",className:"form-control ".concat(o.rfid?"is-invalid":""),value:a.rfid,onChange:x}),o.rfid&&(0,i.jsx)("div",{className:"invalid-feedback",children:o.rfid})]}),(0,i.jsxs)("div",{className:"mb-3",children:[(0,i.jsx)("label",{className:"form-label",children:"Kelas"}),(0,i.jsxs)("select",{name:"kelasId",className:"form-select ".concat(o.kelasId?"is-invalid":""),value:a.kelasId,onChange:x,children:[(0,i.jsx)("option",{value:"",children:"Pilih Kelas"}),c.map(e=>(0,i.jsx)("option",{value:e.id,children:e.name},e.id))]}),o.kelasId&&(0,i.jsx)("div",{className:"invalid-feedback",children:o.kelasId})]}),(0,i.jsxs)("div",{className:"mb-3",children:[(0,i.jsx)("label",{className:"form-label",children:"Foto Siswa"}),(0,i.jsx)("input",{type:"file",className:"form-control",accept:"image/*",onChange:e=>{let i=e.target.files[0];if(!i)return;let n=new FileReader;n.onloadend=()=>{s({...a,photo:n.result})},n.readAsDataURL(i)}}),a.photo&&(0,i.jsx)("img",{src:a.photo,alt:"Foto Siswa",className:"mt-2 rounded",style:{width:"120px",height:"120px",objectFit:"cover"}})]}),(0,i.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Tambah Siswa"})]})]})]})}},40482:(e,a,s)=>{"use strict";s.d(a,{A:()=>c});var i=s(37876),n=s(48230),l=s.n(n),t=s(89099),d=s(10323),r=s(14232);function c(){let e=(0,t.useRouter)();(0,d.xI)();let[a,s]=(0,r.useState)(!1),[n,c]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{let e=()=>{c(window.innerWidth<992),window.innerWidth>=992&&s(!0)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,i.jsxs)(i.Fragment,{children:[n&&(0,i.jsx)("button",{style:{position:"absolute",right:"0px"},className:"btn btn-dark m-2",onClick:()=>s(!a),children:"â˜° Menu"}),(0,i.jsxs)("div",{className:"bg-dark text-light position-fixed vh-100 p-3 transition",style:{width:"220px",zIndex:1e3,top:"0px",left:a?"0":"-240px",transition:"left 0.3s ease"},children:[(0,i.jsx)("div",{className:"mb-4",children:(0,i.jsx)("h5",{children:"SIS Dashboard"})}),(0,i.jsx)("ul",{className:"nav nav-pills flex-column mb-auto",children:[{name:"Dashboard",href:"/dashboard"},{name:"Kelas",href:"/classes"},{name:"Siswa",href:"/admin/students/siswa"},{name:"Absensi",href:"/attendance"},{name:"Rekap",href:"/reports"}].map(a=>(0,i.jsx)("li",{className:"nav-item",children:(0,i.jsx)(l(),{href:a.href,className:"nav-link text-light ".concat(e.pathname===a.href?"active bg-primary":""),children:a.name})},a.href))})]})]})}},81382:(e,a,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/students/create",function(){return s(25705)}])}},e=>{e.O(0,[636,593,792],()=>e(e.s=81382)),_N_E=e.O()}]);