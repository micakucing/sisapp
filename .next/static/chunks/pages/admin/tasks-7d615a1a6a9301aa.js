(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[102],{11460:(e,a,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/tasks",function(){return t(99162)}])},22013:(e,a,t)=>{"use strict";t.d(a,{A:()=>u});var s=t(37876),n=t(14232),l=t(14e3),r=t(98467),i=t(20485);function u(e){let{allowedRoles:a,children:t}=e,u=(0,l.useRouter)(),[d,c]=(0,n.useState)(!0),[o,m]=(0,n.useState)(!1);return((0,n.useEffect)(()=>{(async()=>{let e=r.j.currentUser;if(!e)return u.push("/");let t=(0,i.H9)(r.db,"users",e.uid),s=(await (0,i.x7)(t)).data();if(!(null==s?void 0:s.role)){alert("Role belum ditentukan. Hubungi admin!"),u.push("/");return}a.includes(s.role)?m(!0):"siswa"===s.role?u.push("/student/dashboard"):u.push("/"),c(!1)})()},[u,a]),d)?(0,s.jsx)("p",{children:"Loading..."}):o?(0,s.jsx)(s.Fragment,{children:t}):null}},99162:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>u});var s=t(37876),n=t(14232),l=t(20485),r=t(98467),i=t(22013);function u(e){let{guruId:a}=e,[t,u]=(0,n.useState)([]),[d,c]=(0,n.useState)(""),[o,m]=(0,n.useState)(""),[h,p]=(0,n.useState)(""),[b,g]=(0,n.useState)(""),f=async()=>{u((await (0,l.GG)((0,l.rJ)(r.db,"tasks"))).docs.map(e=>({id:e.id,...e.data()})))};(0,n.useEffect)(()=>{f()},[]);let x=async()=>{if(!d||!o||!h||!b)return alert("Isi semua field");await (0,l.gS)((0,l.rJ)(r.db,"tasks"),{title:d,description:o,kelasId:h,dueDate:new Date(b),createdBy:a,timestamp:new Date}),c(""),m(""),p(""),g(""),f()},j=async e=>{confirm("Hapus tugas ini?")&&(await (0,l.kd)((0,l.H9)(r.db,"tasks",e)),f())};return(0,s.jsx)(i.A,{allowedRoles:["admin","guru"],children:(0,s.jsxs)("div",{className:"container py-5",children:[(0,s.jsx)("h2",{className:"mb-4",children:"Kelola Tugas Guru"}),(0,s.jsxs)("div",{className:"card p-3 mb-4",children:[(0,s.jsx)("h5",{children:"Buat Tugas Baru"}),(0,s.jsx)("input",{className:"form-control mb-2",placeholder:"Judul",value:d,onChange:e=>c(e.target.value)}),(0,s.jsx)("textarea",{className:"form-control mb-2",placeholder:"Deskripsi",value:o,onChange:e=>m(e.target.value)}),(0,s.jsx)("input",{className:"form-control mb-2",placeholder:"Kelas ID",value:h,onChange:e=>p(e.target.value)}),(0,s.jsx)("input",{className:"form-control mb-2",type:"date",value:b,onChange:e=>g(e.target.value)}),(0,s.jsx)("button",{className:"btn btn-success",onClick:x,children:"Tambah Tugas"})]}),(0,s.jsx)("div",{className:"list-group",children:t.map(e=>{var a;return(0,s.jsxs)("div",{className:"list-group-item d-flex justify-content-between align-items-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:e.title})," - ",e.description," (Deadline: ",(null==(a=e.dueDate)?void 0:a.toDate)?e.dueDate.toDate().toLocaleDateString():new Date(e.dueDate).toLocaleDateString(),")"]}),(0,s.jsxs)("div",{className:"d-flex gap-2",children:[(0,s.jsx)("a",{href:"/admin/task/".concat(e.id),className:"btn btn-primary btn-sm",children:"Lihat Submission"}),(0,s.jsx)("button",{className:"btn btn-danger btn-sm",onClick:()=>j(e.id),children:"Hapus"})]})]},e.id)})})]})})}}},e=>{e.O(0,[0,636,593,792],()=>e(e.s=11460)),_N_E=e.O()}]);