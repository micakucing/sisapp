(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[713],{37080:(e,s,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/attendance/rekap",function(){return a(58467)}])},40482:(e,s,a)=>{"use strict";a.d(s,{A:()=>c});var t=a(37876),n=a(48230),i=a.n(n),r=a(89099),d=a(10323),l=a(14232);function c(){let e=(0,r.useRouter)();(0,d.xI)();let[s,a]=(0,l.useState)(!1),[n,c]=(0,l.useState)(!1);return(0,l.useEffect)(()=>{let e=()=>{c(window.innerWidth<992),window.innerWidth>=992&&a(!0)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,t.jsxs)(t.Fragment,{children:[n&&(0,t.jsx)("button",{style:{position:"absolute",right:"0px"},className:"btn btn-dark m-2",onClick:()=>a(!s),children:"â˜° Menu"}),(0,t.jsxs)("div",{className:"bg-dark text-light position-fixed vh-100 p-3 transition",style:{width:"220px",zIndex:1e3,top:"0px",left:s?"0":"-240px",transition:"left 0.3s ease"},children:[(0,t.jsx)("div",{className:"mb-4",children:(0,t.jsx)("h5",{children:"SIS Dashboard"})}),(0,t.jsx)("ul",{className:"nav nav-pills flex-column mb-auto",children:[{name:"Dashboard",href:"/dashboard"},{name:"Kelas",href:"/classes"},{name:"Siswa",href:"/admin/students/siswa"},{name:"Absensi",href:"/attendance"},{name:"Rekap",href:"/reports"}].map(s=>(0,t.jsx)("li",{className:"nav-item",children:(0,t.jsx)(i(),{href:s.href,className:"nav-link text-light ".concat(e.pathname===s.href?"active bg-primary":""),children:s.name})},s.href))})]})]})}},58467:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>l});var t=a(37876),n=a(14232),i=a(20485),r=a(98467),d=a(40482);function l(){let[e,s]=(0,n.useState)([]),[a,l]=(0,n.useState)([]),[c]=(0,n.useState)(new Date().toISOString().substring(0,10));return(0,n.useEffect)(()=>{!async function(){l((await (0,i.GG)((0,i.rJ)(r.db,"students"))).docs.map(e=>({id:e.id,...e.data()})))}()},[]),(0,n.useEffect)(()=>{let e=(0,i.P)((0,i.rJ)(r.db,"attendance"),(0,i.My)("timestamp","desc")),a=(0,i.aQ)(e,e=>{s(e.docs.map(e=>{var s,a;let t=e.data(),n=(null==(s=t.timestamp)?void 0:s.toDate)?t.timestamp.toDate():new Date((null==(a=t.timestamp)?void 0:a.seconds)*1e3||Date.now());return{id:e.id,...t,dateObj:n}}).filter(e=>e.dateObj.toISOString().substring(0,10)===c))});return()=>a()},[c]),(0,t.jsxs)("div",{className:"d-flex flex-column flex-lg-row",children:[(0,t.jsx)(d.A,{}),(0,t.jsxs)("div",{className:"flex-grow-1 p-3",children:[(0,t.jsx)("h2",{className:"mb-4",children:"Rekap Absensi Hari Ini"}),0===e.length&&(0,t.jsx)("div",{className:"text-center",children:"Belum ada absensi hari ini"}),(0,t.jsx)("div",{className:"row g-3",children:e.map(e=>{let s,n=(s=e.siswaId,a.find(e=>e.id===s));return n?(0,t.jsx)("div",{className:"col-12 col-sm-6 col-lg-4",children:(0,t.jsxs)("div",{className:"card shadow-sm",children:[n.photo&&(0,t.jsx)("img",{src:n.photo,alt:"Foto Siswa",className:"card-img-top",style:{height:"180px",objectFit:"cover"}}),(0,t.jsxs)("div",{className:"card-body",children:[(0,t.jsx)("h5",{className:"card-title",children:n.name}),(0,t.jsxs)("p",{className:"card-text",children:["NIS: ",n.nis]}),(0,t.jsx)("span",{className:"badge bg-success",children:e.status})]})]})},e.id):null})})]})]})}}},e=>{e.O(0,[636,593,792],()=>e(e.s=37080)),_N_E=e.O()}]);