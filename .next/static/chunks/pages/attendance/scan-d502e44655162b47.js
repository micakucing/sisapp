(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[911],{16133:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>c});var t=s(37876),n=s(14232),r=s(20485),i=s(98467),l=s(40482);function c(){let[e,a]=(0,n.useState)(""),[s,c]=(0,n.useState)(null),[d,o]=(0,n.useState)([]),u=(0,n.useRef)(null);(0,n.useEffect)(()=>{!async function(){o((await (0,r.GG)((0,r.rJ)(i.db,"students"))).docs.map(e=>({id:e.id,...e.data()})))}()},[]),(0,n.useEffect)(()=>{u.current&&u.current.focus()},[]);let m=async()=>{let e=(0,r.H9)(i.db,"settings","attendance"),a=await (0,r.x7)(e);return a.exists()?a.data():{jamMasuk:"07:30",jamPulang:"15:00"}},h=async s=>{if(s.preventDefault(),!e)return;let t=d.find(a=>a.rfid===e);if(!t){alert("RFID tidak terdaftar"),a("");return}let n=await m(),l=new Date,o="".concat(String(l.getHours()).padStart(2,"0"),":").concat(String(l.getMinutes()).padStart(2,"0")),u="Hadir";o>n.jamMasuk&&(u="Telat"),await (0,r.gS)((0,r.rJ)(i.db,"attendance"),{siswaId:t.id,status:u,timestamp:(0,r.O5)()}),c({...t,status:u}),a("")};return(0,t.jsxs)("div",{className:"d-flex flex-column flex-lg-row",children:[(0,t.jsxs)("div",{className:"col-lg-2 p-0",children:["      ",(0,t.jsx)(l.A,{})]}),(0,t.jsxs)("div",{className:"flex-grow-1 p-3",children:[(0,t.jsx)("h2",{className:"mb-4",children:"Scan RFID Siswa"}),(0,t.jsx)("form",{onSubmit:h,className:"mb-4",children:(0,t.jsx)("input",{type:"text",ref:u,value:e,onChange:e=>a(e.target.value),className:"form-control",placeholder:"Tempel kartu RFID di reader",autoFocus:!0})}),s&&(0,t.jsxs)("div",{className:"card shadow-sm w-100 w-md-50",children:[s.photo&&(0,t.jsx)("img",{src:s.photo,alt:"Foto Siswa",className:"card-img-top",style:{height:"180px",objectFit:"cover"}}),(0,t.jsxs)("div",{className:"card-body",children:[(0,t.jsx)("h5",{className:"card-title",children:s.name}),(0,t.jsxs)("p",{className:"card-text",children:["NIS: ",s.nis]}),(0,t.jsx)("span",{className:"badge bg-success",children:"Hadir"})]})]})]})]})}},40482:(e,a,s)=>{"use strict";s.d(a,{A:()=>d});var t=s(37876),n=s(48230),r=s.n(n),i=s(89099),l=s(10323),c=s(14232);function d(){let e=(0,i.useRouter)();(0,l.xI)();let[a,s]=(0,c.useState)(!1),[n,d]=(0,c.useState)(!1);return(0,c.useEffect)(()=>{let e=()=>{d(window.innerWidth<992),window.innerWidth>=992&&s(!0)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,t.jsxs)(t.Fragment,{children:[n&&(0,t.jsx)("button",{style:{position:"absolute",right:"0px"},className:"btn btn-dark m-2",onClick:()=>s(!a),children:"â˜° Menu"}),(0,t.jsxs)("div",{className:"bg-dark text-light position-fixed vh-100 p-3 transition",style:{width:"220px",zIndex:1e3,top:"0px",left:a?"0":"-240px",transition:"left 0.3s ease"},children:[(0,t.jsx)("div",{className:"mb-4",children:(0,t.jsx)("h5",{children:"SIS Dashboard"})}),(0,t.jsx)("ul",{className:"nav nav-pills flex-column mb-auto",children:[{name:"Dashboard",href:"/dashboard"},{name:"Kelas",href:"/classes"},{name:"Siswa",href:"/admin/students/siswa"},{name:"Absensi",href:"/attendance"},{name:"Rekap",href:"/reports"}].map(a=>(0,t.jsx)("li",{className:"nav-item",children:(0,t.jsx)(r(),{href:a.href,className:"nav-link text-light ".concat(e.pathname===a.href?"active bg-primary":""),children:a.name})},a.href))})]})]})}},90822:(e,a,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/attendance/scan",function(){return s(16133)}])}},e=>{e.O(0,[636,593,792],()=>e(e.s=90822)),_N_E=e.O()}]);