(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[396],{19931:(e,s,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/classes",function(){return a(69907)}])},22013:(e,s,a)=>{"use strict";a.d(s,{A:()=>d});var t=a(37876),l=a(14232),n=a(14e3),i=a(98467),r=a(20485);function d(e){let{allowedRoles:s,children:a}=e,d=(0,n.useRouter)(),[c,h]=(0,l.useState)(!0),[u,o]=(0,l.useState)(!1);return((0,l.useEffect)(()=>{(async()=>{let e=i.j.currentUser;if(!e)return d.push("/");let a=(0,r.H9)(i.db,"users",e.uid),t=(await (0,r.x7)(a)).data();if(!(null==t?void 0:t.role)){alert("Role belum ditentukan. Hubungi admin!"),d.push("/");return}s.includes(t.role)?o(!0):"siswa"===t.role?d.push("/student/dashboard"):d.push("/"),h(!1)})()},[d,s]),c)?(0,t.jsx)("p",{children:"Loading..."}):u?(0,t.jsx)(t.Fragment,{children:a}):null}},40482:(e,s,a)=>{"use strict";a.d(s,{A:()=>c});var t=a(37876),l=a(48230),n=a.n(l),i=a(89099),r=a(10323),d=a(14232);function c(){let e=(0,i.useRouter)();(0,r.xI)();let[s,a]=(0,d.useState)(!1),[l,c]=(0,d.useState)(!1);return(0,d.useEffect)(()=>{let e=()=>{c(window.innerWidth<992),window.innerWidth>=992&&a(!0)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,t.jsxs)(t.Fragment,{children:[l&&(0,t.jsx)("button",{style:{position:"absolute",right:"0px"},className:"btn btn-dark m-2",onClick:()=>a(!s),children:"â˜° Menu"}),(0,t.jsxs)("div",{className:"bg-dark text-light position-fixed vh-100 p-3 transition",style:{width:"220px",zIndex:1e3,top:"0px",left:s?"0":"-240px",transition:"left 0.3s ease"},children:[(0,t.jsx)("div",{className:"mb-4",children:(0,t.jsx)("h5",{children:"SIS Dashboard"})}),(0,t.jsx)("ul",{className:"nav nav-pills flex-column mb-auto",children:[{name:"Dashboard",href:"/dashboard"},{name:"Kelas",href:"/classes"},{name:"Siswa",href:"/admin/students/siswa"},{name:"Absensi",href:"/attendance"},{name:"Rekap",href:"/reports"}].map(s=>(0,t.jsx)("li",{className:"nav-item",children:(0,t.jsx)(n(),{href:s.href,className:"nav-link text-light ".concat(e.pathname===s.href?"active bg-primary":""),children:s.name})},s.href))})]})]})}},69907:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>c});var t=a(37876),l=a(14232),n=a(22013),i=a(98467),r=a(20485),d=a(40482);function c(){let[e,s]=(0,l.useState)([]),[a,c]=(0,l.useState)(""),[h,u]=(0,l.useState)(""),[o,m]=(0,l.useState)(null);(0,l.useEffect)(()=>{x()},[]);let x=async()=>{s((await (0,r.GG)((0,r.rJ)(i.db,"classes"))).docs.map(e=>({id:e.id,...e.data()})))},b=async e=>{if(e.preventDefault(),!a)return alert("Nama kelas wajib diisi!");if(o){let e=(0,r.H9)(i.db,"classes",o);await (0,r.mZ)(e,{name:a,wali:h}),m(null)}else await (0,r.gS)((0,r.rJ)(i.db,"classes"),{name:a,wali:h});c(""),u(""),x()},j=async e=>{confirm("Yakin ingin hapus kelas ini?")&&(await (0,r.kd)((0,r.H9)(i.db,"classes",e)),x())};return(0,t.jsx)(n.A,{allowedRoles:["admin","guru"],children:(0,t.jsxs)("div",{className:"d-flex flex-column flex-lg-row",children:[(0,t.jsx)("div",{className:"col-lg-2 p-0",children:(0,t.jsx)(d.A,{})}),(0,t.jsxs)("div",{className:"flex-grow-1 p-3",children:["        ",(0,t.jsx)("h2",{children:"Manajemen Kelas"}),(0,t.jsxs)("form",{className:"row g-3 my-3",onSubmit:b,children:[(0,t.jsx)("div",{className:"col-md-4",children:(0,t.jsx)("input",{type:"text",className:"form-control",placeholder:"Nama Kelas",value:a,onChange:e=>c(e.target.value),required:!0})}),(0,t.jsx)("div",{className:"col-md-4",children:(0,t.jsx)("input",{type:"text",className:"form-control",placeholder:"Wali Kelas",value:h,onChange:e=>u(e.target.value)})}),(0,t.jsx)("div",{className:"col-md-4",children:(0,t.jsx)("button",{type:"submit",className:"btn btn-primary w-100",children:o?"Update Kelas":"Tambah Kelas"})})]}),(0,t.jsx)("div",{className:"table-responsive",children:(0,t.jsxs)("table",{className:"table table-bordered table-striped",children:[(0,t.jsx)("thead",{className:"table-dark",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"No"}),(0,t.jsx)("th",{children:"Nama Kelas"}),(0,t.jsx)("th",{children:"Wali Kelas"}),(0,t.jsx)("th",{children:"Aksi"})]})}),(0,t.jsxs)("tbody",{children:[e.map((e,s)=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:s+1}),(0,t.jsx)("td",{children:e.name}),(0,t.jsx)("td",{children:e.wali}),(0,t.jsxs)("td",{children:[(0,t.jsx)("button",{className:"btn btn-sm btn-warning me-2",onClick:()=>{c(e.name),u(e.wali||""),m(e.id)},children:"Edit"}),(0,t.jsx)("button",{className:"btn btn-sm btn-danger",onClick:()=>j(e.id),children:"Hapus"})]})]},e.id)),0===e.length&&(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:"4",className:"text-center",children:"Belum ada data kelas."})})]})]})})]})]})})}}},e=>{e.O(0,[0,636,593,792],()=>e(e.s=19931)),_N_E=e.O()}]);