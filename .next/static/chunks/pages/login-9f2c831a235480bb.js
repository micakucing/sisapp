(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[295],{14829:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>d});var r=s(37876),t=s(14232),l=s(14e3),n=s(10323),i=s(98467),u=s(20485);function d(){let e=(0,l.useRouter)(),[a,s]=(0,t.useState)(""),[d,o]=(0,t.useState)(""),[c,m]=(0,t.useState)(!1),h=async s=>{s.preventDefault(),m(!0);try{let s=(await (0,n.x9)(i.j,a,d)).user,r=(0,u.H9)(i.db,"users",s.uid),t=(await (0,u.x7)(r)).data();if(!(null==t?void 0:t.role)){alert("Role belum ditentukan. Hubungi admin!"),m(!1);return}"siswa"===t.role?e.push("/students/dashboard"):["admin","guru"].includes(t.role)?e.push("/admin/dashboard"):alert("Role tidak dikenali")}catch(e){console.error(e),alert("Login gagal! Periksa email/password.")}finally{m(!1)}};return(0,r.jsx)("div",{className:"container py-5",children:(0,r.jsx)("div",{className:"row justify-content-center",children:(0,r.jsx)("div",{className:"col-md-5",children:(0,r.jsxs)("div",{className:"card shadow-sm p-4",children:[(0,r.jsx)("h3",{className:"mb-4 text-center",children:"Login Sistem Sekolah"}),(0,r.jsxs)("form",{onSubmit:h,children:[(0,r.jsx)("input",{type:"email",className:"form-control mb-3",placeholder:"Email",value:a,onChange:e=>s(e.target.value),required:!0}),(0,r.jsx)("input",{type:"password",className:"form-control mb-3",placeholder:"Password",value:d,onChange:e=>o(e.target.value),required:!0}),(0,r.jsx)("button",{className:"btn btn-primary w-100",type:"submit",disabled:c,children:c?"Memuat...":"Login"})]})]})})})})}},15794:(e,a,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return s(14829)}])}},e=>{e.O(0,[0,636,593,792],()=>e(e.s=15794)),_N_E=e.O()}]);