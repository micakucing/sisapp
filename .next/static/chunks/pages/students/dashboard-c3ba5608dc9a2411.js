(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[881],{22548:(e,s,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/students/dashboard",function(){return a(59563)}])},59563:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>n});var t=a(37876),d=a(14232),i=a(20485),l=a(98467);function n(e){let{studentId:s,kelasId:a}=e,[n,r]=(0,d.useState)([]),[c,h]=(0,d.useState)([]),[x,j]=(0,d.useState)([]),[u,m]=(0,d.useState)([]),[o,b]=(0,d.useState)(!0);return((0,d.useEffect)(()=>{(async()=>{if(!a)return b(!1);try{let e=new Date,t=(0,i.P)((0,i.rJ)(l.db,"exams"),(0,i._M)("kelasId","==",a)),d=(await (0,i.GG)(t)).docs.map(e=>({id:e.id,...e.data()})).filter(s=>s.date&&s.date.toDate()>=e);r(d);let n=await (0,i.GG)((0,i.P)((0,i.rJ)(l.db,"examResults"),(0,i._M)("studentId","==",s)));h(n.docs.map(e=>({id:e.id,...e.data()})));let c=await (0,i.GG)((0,i.P)((0,i.rJ)(l.db,"attendances"),(0,i._M)("studentId","==",s)));j(c.docs.map(e=>({id:e.id,...e.data()})));let x=(0,i.P)((0,i.rJ)(l.db,"tasks"),(0,i._M)("kelasId","==",a)),u=await (0,i.GG)(x);m(u.docs.map(e=>({id:e.id,...e.data()}))),b(!1)}catch(e){console.error(e),b(!1)}})()},[s,a]),o)?(0,t.jsx)("p",{children:"Loading..."}):(0,t.jsxs)("div",{className:"container py-5",children:[(0,t.jsx)("h2",{className:"mb-4",children:"Dashboard Siswa"}),(0,t.jsxs)("div",{className:"mb-5",children:[(0,t.jsx)("h4",{children:"Nilai Ujian"}),(0,t.jsx)("div",{className:"table-responsive",children:(0,t.jsxs)("table",{className:"table table-bordered",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"Ujian"}),(0,t.jsx)("th",{children:"Score"}),(0,t.jsx)("th",{children:"Status"})]})}),(0,t.jsx)("tbody",{children:c.map(e=>{let s=n.find(s=>s.id===e.examId);return(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:(null==s?void 0:s.title)||"-"}),(0,t.jsx)("td",{children:e.score}),(0,t.jsx)("td",{children:e.status})]},e.id)})})]})})]}),(0,t.jsxs)("div",{className:"mb-5",children:[(0,t.jsx)("h4",{children:"Jadwal Ujian"}),n.length>0?(0,t.jsx)("div",{className:"list-group",children:n.map(e=>{var s;return(0,t.jsxs)("div",{className:"list-group-item",children:[(0,t.jsx)("strong",{children:e.title})," - ",e.description," (",e.duration," menit)",(0,t.jsxs)("div",{className:"text-muted",children:["Tanggal: ",null==(s=e.date)?void 0:s.toDate().toLocaleDateString()]})]},e.id)})}):(0,t.jsx)("p",{className:"text-muted",children:"Belum ada jadwal ujian."})]}),(0,t.jsxs)("div",{className:"mb-5",children:[(0,t.jsx)("h4",{children:"Absensi"}),x.length>0?(0,t.jsx)("div",{className:"table-responsive",children:(0,t.jsxs)("table",{className:"table table-bordered",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"Tanggal"}),(0,t.jsx)("th",{children:"Status"})]})}),(0,t.jsx)("tbody",{children:x.map(e=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:e.tanggal}),(0,t.jsx)("td",{children:e.status})]},e.id))})]})}):(0,t.jsx)("p",{className:"text-muted",children:"Belum ada data absensi."})]}),(0,t.jsxs)("div",{className:"mb-5",children:[(0,t.jsx)("h4",{children:"Tugas"}),u.length>0?(0,t.jsx)("div",{className:"list-group",children:u.map(e=>{var s,a;return(0,t.jsx)("div",{className:"list-group-item d-flex justify-content-between align-items-center",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{children:e.title})," - ",e.description," (Deadline: ",(null==(a=e.dueDate)||null==(s=a.toDate)?void 0:s.call(a).toLocaleDateString())||new Date(e.dueDate).toLocaleDateString(),")"]})},e.id)})}):(0,t.jsx)("p",{className:"text-muted",children:"Belum ada tugas."})]})]})}}},e=>{e.O(0,[636,593,792],()=>e(e.s=22548)),_N_E=e.O()}]);